{"version":3,"sources":["webpack:///./src/views/projectHomePage.pug","webpack:///./src/store/modules/projectHomePage/ProjectHomePageStore.ts","webpack:///./src/pages/home/projectHomePage/Index.vue","webpack:///./src/pages/home/projectHomePage/Index.vue?f9c1","webpack:///./src/pages/home/projectHomePage/Index.vue?6c86","webpack:///./src/styles/projectHomePage.stylus?c335"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","_s","project","examine","danger","great","reform","immediatelyReform","immediatelyReview","on","getCategoryData","model","value","callback","$$v","categoryRadio","expression","ref","getTendencyData","tendencyRadio","staticRenderFns","args","url","requestConfig","projectHomePage","params","post","categoryData","namespaced","stateFactory","dynamic","name","store","projectId","sessionStorage","getItem","now","Date","nowTime","get","weekAgo","getTime","getDay","monthAgo","getDate","ProjectHomePageStore","getProjectData","then","res","code","data","examineTotal","hiddenDangerTotal","majorHiddenDangerTotal","rectificationRate","toFixed","timelyCorrectionRate","timelyReviewRate","startTime","endTime","map","a","inspectTask","count","getCategory","length","total","reduce","num","item","X","echart","init","$refs","category","setOption","tooltip","trigger","formatter","legend","orient","x","bottom","label","filter","showName","padStart","substring","color","series","type","radius","center","avoidLabelOverlap","show","position","emphasis","fontSize","fontWeight","labelLine","window","onresize","resize","tendency","createOn","ordinary","riskTotal","significanTiskTotal","getTendency","axisPointer","backgroundColor","grid","containLabel","top","left","right","xAxis","axisTick","yAxis","axisLine","splitLine","lineStyle","smooth","component"],"mappings":"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","file":"js/chunk-05b34292.b1a6f54b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"projectHomePage\"}},[_c('div',{staticClass:\"top\"},[_c('div',{staticClass:\"detection shadow\"},[_c('p',{staticClass:\"title\"},[_vm._v(\"检测统计\")]),_c('div',{staticClass:\"detection-body\"},[_c('p',[_vm._v(\"检查总数 \"+_vm._s(_vm.project.examine))]),_c('p',[_vm._v(\"隐患总数 \"+_vm._s(_vm.project.danger))]),_c('p',[_vm._v(\"重大隐患 \"+_vm._s(_vm.project.great))])])]),_c('div',{staticClass:\"trouble shadow\"},[_c('p',{staticClass:\"title\"},[_vm._v(\"隐患排查统计\")]),_c('div',{staticClass:\"trouble-body\"},[_c('p',[_vm._v(\"项目整改率 \"+_vm._s(_vm.project.reform)+\"%\")]),_c('p',[_vm._v(\"项目及时整改率 \"+_vm._s(_vm.project.immediatelyReform)+\"%\")]),_c('p',[_vm._v(\"项目及时复查率 \"+_vm._s(_vm.project.immediatelyReview)+\"%\")])])])]),_c('div',{staticClass:\"center\"},[_c('div',{staticClass:\"category shadow\"},[_c('p',{staticClass:\"title\"},[_vm._v(\"隐患类别统计\")]),_c('div',{staticClass:\"radio\"},[_c('el-radio-group',{on:{\"change\":_vm.getCategoryData},model:{value:(_vm.categoryRadio),callback:function ($$v) {_vm.categoryRadio=$$v},expression:\"categoryRadio\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"本周\")]),_c('el-radio',{attrs:{\"label\":2}},[_vm._v(\"本月\")])],1)],1),_c('div',{ref:\"category\",staticClass:\"category-chart\"})]),_c('div',{staticClass:\"tendency shadow\"},[_c('p',{staticClass:\"title\"},[_vm._v(\"隐患趋势图\")]),_c('div',{staticClass:\"radio\"},[_c('el-radio-group',{on:{\"change\":_vm.getTendencyData},model:{value:(_vm.tendencyRadio),callback:function ($$v) {_vm.tendencyRadio=$$v},expression:\"tendencyRadio\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"本周\")]),_c('el-radio',{attrs:{\"label\":2}},[_vm._v(\"本月\")])],1)],1),_c('div',{ref:\"tendency\",staticClass:\"tendency-chart\"})])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\r\n * @Date         : 2020-05-28 14:20:16\r\n * @LastEditors  : HaoJie\r\n * @LastEditTime : 2020-06-12 13:52:39\r\n * @FilePath     : \\src\\store\\modules\\projectHomePage\\ProjectHomePageStore.ts\r\n */\r\nimport { Module, VuexModule, Action } from \"vuex-module-decorators\";\r\nimport store from \"../..\";\r\nimport { requestConfig } from \"request/requestConfig\";\r\nimport { server as axios } from \"common/HttpClient\";\r\n\r\n@Module({\r\n  namespaced: true,\r\n  stateFactory: true,\r\n  dynamic: true,\r\n  name: \"ProjectHomePage\",\r\n  store,\r\n})\r\nexport default class ProjectHomePage extends VuexModule {\r\n  public url: any;\r\n  constructor(args: any) {\r\n    super(args);\r\n    this.url = requestConfig.projectHomePage;\r\n  }\r\n\r\n  // 获取项目数据\r\n  @Action\r\n  getProjectData(params: any): Promise<any> {\r\n    return axios.post(this.url.project, params);\r\n  }\r\n\r\n  // 获取隐患类别统计\r\n  @Action\r\n  getCategoryData(params: any): Promise<any> {\r\n    return axios.post(this.url.categoryData, params);\r\n  }\r\n\r\n  // 获取隐患趋势图\r\n  @Action\r\n  getTendencyData(params: any): Promise<any> {\r\n    return axios.post(this.url.getTendencyData, params);\r\n  }\r\n}","\n\n\n\n\n\n\r\nimport { Component, Vue } from \"vue-property-decorator\";\r\nimport { getModule } from \"vuex-module-decorators\";\r\nimport ProjectHomePageStore from \"store/modules/projectHomePage/ProjectHomePageStore\";\r\nimport echarts from \"echarts\";\r\nimport msg from \"common/MessageUtils\";\r\nimport Time from \"common/mixin\";\r\n\r\n@Component({})\r\nexport default class ProjectHomePage extends Vue {\r\n  private store: any;\r\n  private categoryRadio = 1; // 隐患类型时间段\r\n  private tendencyRadio = 1; // 隐患趋势图时间段\r\n  private projectId: string | null = sessionStorage.getItem(\"seeProjectId\");\r\n  private now: Date = new Date();\r\n  private nowTime: string = new Time(this.now).get(); // 当前的日期\r\n  private weekAgo: string = new Time(\r\n    new Date(\r\n      this.now.getTime() -\r\n        1000 * 60 * 60 * 24 * (this.now.getDay() ? this.now.getDay() - 1 : 6)\r\n    )\r\n  ).get(); // 周一的日期\r\n\r\n  private monthAgo: string = new Time(\r\n    new Date(\r\n      this.now.getTime() - 1000 * 60 * 60 * 24 * (this.now.getDate() - 1)\r\n    )\r\n  ).get(); // 一月前的日期\r\n\r\n  private project: any = {\r\n    examine: 0, // 检查总数\r\n    danger: 0, // 隐患总数\r\n    great: 0, // 重大隐患总数\r\n    reform: 0, // 整改率\r\n    immediatelyReform: 0, // 及时整改率\r\n    immediatelyReview: 0 // 及时复查率\r\n  };\r\n\r\n  constructor() {\r\n    super();\r\n    this.store = getModule(ProjectHomePageStore);\r\n  }\r\n\r\n  mounted() {\r\n    this.getProjectData();\r\n    this.getCategoryData();\r\n    this.getTendencyData();\r\n  }\r\n\r\n  // 获取项目数据\r\n  getProjectData() {\r\n    this.store\r\n      .getProjectData({ projectId: this.projectId })\r\n      .then((res: any) => {\r\n        if (res.code === 0) {\r\n          const data = res.data;\r\n          this.project = {\r\n            examine: data.examineTotal, // 检查总数\r\n            danger: data.hiddenDangerTotal, // 隐患总数\r\n            great: data.majorHiddenDangerTotal, // 重大隐患总数\r\n            reform: (data.rectificationRate * 100).toFixed(2), // 整改率\r\n            immediatelyReform: (data.timelyCorrectionRate * 100).toFixed(2), // 及时整改率\r\n            immediatelyReview: (data.timelyReviewRate * 100).toFixed(2), // 及时复查率\r\n          };\r\n        }\r\n      });\r\n  }\r\n\r\n  // 获取隐患类型数据\r\n  getCategoryData() {\r\n    const params: any = {\r\n      projectId: this.projectId,\r\n      startTime: this.categoryRadio === 1 ? this.weekAgo : this.monthAgo,\r\n      endTime: this.nowTime\r\n    };\r\n    this.store.getCategoryData(params).then((res: any) => {\r\n      if (res.code === 0) {\r\n        const categoryData = res.data.map((a: any) => {\r\n          return {\r\n            name: a.inspectTask,\r\n            value: a.count\r\n          };\r\n        });\r\n        this.getCategory(categoryData);\r\n      }\r\n    });\r\n  }\r\n\r\n  // 隐患类别统计\r\n  getCategory(data: Array<Category> | null = null) {\r\n    data = data && data.length ? data : [{ name: \"无数据\", value: 0 }];\r\n    const total: number = data.reduce((num, item) => num + item.value, 0);\r\n    const X = data.map(a => a.name);\r\n    const echart = echarts.init(this.$refs.category);\r\n    echart.setOption({\r\n      tooltip: {\r\n        trigger: \"item\",\r\n        formatter: \"{b}: {c} ({d}%)\"\r\n      },\r\n      legend: {\r\n        orient: \"vertical\",\r\n        x: \"center\",\r\n        bottom: 20,\r\n        formatter: (name: string) => {\r\n          const label: Category = (data as any).filter((a: any) => a.name === name)[0];\r\n          const value: number = total ? (label.value / total) * 100 : 0;\r\n          const showName: string =\r\n            name.length < 6 ? name.padStart(5, \"一\") : name.substring(0, 5);\r\n          return ` ${showName} | ${\r\n            value < 10 && total ? \"0\" + value : value\r\n          }%   ${label.value}`;\r\n        },\r\n        data: X\r\n      },\r\n      color: [\"#36CBCB\", \"#975FE4\", \"#F04864\", \"#FAD337\", \"#4ECB73\", \"#3BA0FF\"],\r\n      series: [\r\n        {\r\n          type: \"pie\",\r\n          radius: [\"40%\", \"60%\"],\r\n          center: [\"50%\", \"35%\"],\r\n          avoidLabelOverlap: false,\r\n          label: {\r\n            show: false,\r\n            position: \"center\"\r\n          },\r\n          emphasis: {\r\n            label: {\r\n              show: true,\r\n              fontSize: \"30\",\r\n              fontWeight: \"bold\"\r\n            }\r\n          },\r\n          labelLine: {\r\n            show: false\r\n          },\r\n          data: data\r\n        }\r\n      ]\r\n    });\r\n    window.onresize = () => {\r\n      echart.resize();\r\n    };\r\n  }\r\n\r\n  // 获取风险数据\r\n  getTendencyData() {\r\n    const params: any = {\r\n      projectId: this.projectId,\r\n      startTime: this.tendencyRadio === 1 ? this.weekAgo : this.monthAgo,\r\n      endTime: this.nowTime\r\n    };\r\n    this.store.getTendencyData(params).then((res: any) => {\r\n      if (res.code === 0) {\r\n        const tendency = res.data.map((a: any) => {\r\n          return {\r\n            name: a.createOn,\r\n            ordinary: a.riskTotal - a.significanTiskTotal,\r\n            great: a.significanTiskTotal\r\n          };\r\n        });\r\n        this.getTendency(tendency);\r\n      }\r\n    });\r\n  }\r\n\r\n  // 风险走势图\r\n  getTendency(data: Array<Trend> | null = null) {\r\n    data = data && data.length\r\n      ? data\r\n      : [\r\n        { name: \"无数据\", ordinary: 0, great: 0 },\r\n        { name: \"无数据\", ordinary: 0, great: 0 },\r\n        { name: \"无数据\", ordinary: 0, great: 0 }\r\n      ];\r\n    const X = data.map(a => a.name);\r\n    const ordinary = data.map(a => a.ordinary);\r\n    const great = data.map(a => a.great);\r\n    const echart = echarts.init(this.$refs.tendency);\r\n    echart.setOption({\r\n      tooltip: {\r\n        trigger: \"axis\",\r\n        axisPointer: {\r\n          type: \"cross\",\r\n          label: {\r\n            backgroundColor: \"#6a7985\"\r\n          }\r\n        }\r\n      },\r\n      grid: {\r\n        containLabel: true,\r\n        top: 20,\r\n        bottom: 10,\r\n        left: 20,\r\n        right: 10\r\n      },\r\n      color: [\"#61D182\", \"#2999EB\"],\r\n      xAxis: {\r\n        type: \"category\",\r\n        axisTick: { show: false },\r\n        data: X\r\n      },\r\n      yAxis: {\r\n        type: \"value\",\r\n        axisTick: { show: false },\r\n        axisLine: { show: false },\r\n        splitLine: {\r\n          show: true,\r\n          lineStyle: {\r\n            type: \"dotted\"\r\n          }\r\n        }\r\n      },\r\n      series: [\r\n        {\r\n          name: \"一般隐患\",\r\n          data: ordinary,\r\n          type: \"line\",\r\n          smooth: true\r\n        },\r\n        {\r\n          name: \"重大隐患\",\r\n          data: great,\r\n          type: \"line\",\r\n          smooth: true\r\n        }\r\n      ]\r\n    });\r\n    window.onresize = () => {\r\n      echart.resize();\r\n    };\r\n  }\r\n}\r\ninterface Category {\r\n  name: string;\r\n  value: number;\r\n}\r\ninterface Trend {\r\n  name: string;\r\n  ordinary: number;\r\n  great: number;\r\n}\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"views/projectHomePage.pug?vue&type=template&id=06c22f29&lang=pug&\"\nimport script from \"./Index.vue?vue&type=script&lang=ts&\"\nexport * from \"./Index.vue?vue&type=script&lang=ts&\"\nimport style0 from \"styles/projectHomePage.stylus?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!./projectHomePage.stylus?vue&type=style&index=0&lang=stylus&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!./projectHomePage.stylus?vue&type=style&index=0&lang=stylus&\""],"sourceRoot":""}