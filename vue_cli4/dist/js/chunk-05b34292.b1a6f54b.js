(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05b34292"],{9194:function(e,t,a){},c275:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"projectHomePage"}},[a("div",{staticClass:"top"},[a("div",{staticClass:"detection shadow"},[a("p",{staticClass:"title"},[e._v("检测统计")]),a("div",{staticClass:"detection-body"},[a("p",[e._v("检查总数 "+e._s(e.project.examine))]),a("p",[e._v("隐患总数 "+e._s(e.project.danger))]),a("p",[e._v("重大隐患 "+e._s(e.project.great))])])]),a("div",{staticClass:"trouble shadow"},[a("p",{staticClass:"title"},[e._v("隐患排查统计")]),a("div",{staticClass:"trouble-body"},[a("p",[e._v("项目整改率 "+e._s(e.project.reform)+"%")]),a("p",[e._v("项目及时整改率 "+e._s(e.project.immediatelyReform)+"%")]),a("p",[e._v("项目及时复查率 "+e._s(e.project.immediatelyReview)+"%")])])])]),a("div",{staticClass:"center"},[a("div",{staticClass:"category shadow"},[a("p",{staticClass:"title"},[e._v("隐患类别统计")]),a("div",{staticClass:"radio"},[a("el-radio-group",{on:{change:e.getCategoryData},model:{value:e.categoryRadio,callback:function(t){e.categoryRadio=t},expression:"categoryRadio"}},[a("el-radio",{attrs:{label:1}},[e._v("本周")]),a("el-radio",{attrs:{label:2}},[e._v("本月")])],1)],1),a("div",{ref:"category",staticClass:"category-chart"})]),a("div",{staticClass:"tendency shadow"},[a("p",{staticClass:"title"},[e._v("隐患趋势图")]),a("div",{staticClass:"radio"},[a("el-radio-group",{on:{change:e.getTendencyData},model:{value:e.tendencyRadio,callback:function(t){e.tendencyRadio=t},expression:"tendencyRadio"}},[a("el-radio",{attrs:{label:1}},[e._v("本周")]),a("el-radio",{attrs:{label:2}},[e._v("本月")])],1)],1),a("div",{ref:"tendency",staticClass:"tendency-chart"})])])])},o=[],i=(a("99af"),a("4de4"),a("d81d"),a("13d5"),a("b0c0"),a("b680"),a("4d90"),a("d4ec")),r=a("bee2"),c=a("262e"),s=a("2caf"),l=a("9ab4"),d=a("60a3"),g=a("9006"),u=a("0613"),y=a("7fc3"),p=a("350b"),m=function(e){Object(c["a"])(a,e);var t=Object(s["a"])(a);function a(e){var n;return Object(i["a"])(this,a),n=t.call(this,e),n.url=y["a"].projectHomePage,n}return Object(r["a"])(a,[{key:"getProjectData",value:function(e){return p["a"].post(this.url.project,e)}},{key:"getCategoryData",value:function(e){return p["a"].post(this.url.categoryData,e)}},{key:"getTendencyData",value:function(e){return p["a"].post(this.url.getTendencyData,e)}}]),a}(g["d"]);Object(l["a"])([g["a"]],m.prototype,"getProjectData",null),Object(l["a"])([g["a"]],m.prototype,"getCategoryData",null),Object(l["a"])([g["a"]],m.prototype,"getTendencyData",null),m=Object(l["a"])([Object(g["b"])({namespaced:!0,stateFactory:!0,dynamic:!0,name:"ProjectHomePage",store:u["a"]})],m);var v=m,h=a("313e"),f=a.n(h),b=a("c328"),w=function(e){Object(c["a"])(a,e);var t=Object(s["a"])(a);function a(){var e;return Object(i["a"])(this,a),e=t.call(this),e.categoryRadio=1,e.tendencyRadio=1,e.projectId=sessionStorage.getItem("seeProjectId"),e.now=new Date,e.nowTime=new b["a"](e.now).get(),e.weekAgo=new b["a"](new Date(e.now.getTime()-864e5*(e.now.getDay()?e.now.getDay()-1:6))).get(),e.monthAgo=new b["a"](new Date(e.now.getTime()-864e5*(e.now.getDate()-1))).get(),e.project={examine:0,danger:0,great:0,reform:0,immediatelyReform:0,immediatelyReview:0},e.store=Object(g["e"])(v),e}return Object(r["a"])(a,[{key:"mounted",value:function(){this.getProjectData(),this.getCategoryData(),this.getTendencyData()}},{key:"getProjectData",value:function(){var e=this;this.store.getProjectData({projectId:this.projectId}).then((function(t){if(0===t.code){var a=t.data;e.project={examine:a.examineTotal,danger:a.hiddenDangerTotal,great:a.majorHiddenDangerTotal,reform:(100*a.rectificationRate).toFixed(2),immediatelyReform:(100*a.timelyCorrectionRate).toFixed(2),immediatelyReview:(100*a.timelyReviewRate).toFixed(2)}}}))}},{key:"getCategoryData",value:function(){var e=this,t={projectId:this.projectId,startTime:1===this.categoryRadio?this.weekAgo:this.monthAgo,endTime:this.nowTime};this.store.getCategoryData(t).then((function(t){if(0===t.code){var a=t.data.map((function(e){return{name:e.inspectTask,value:e.count}}));e.getCategory(a)}}))}},{key:"getCategory",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=e&&e.length?e:[{name:"无数据",value:0}];var t=e.reduce((function(e,t){return e+t.value}),0),a=e.map((function(e){return e.name})),n=f.a.init(this.$refs.category);n.setOption({tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},legend:{orient:"vertical",x:"center",bottom:20,formatter:function(a){var n=e.filter((function(e){return e.name===a}))[0],o=t?n.value/t*100:0,i=a.length<6?a.padStart(5,"一"):a.substring(0,5);return" ".concat(i," | ").concat(o<10&&t?"0"+o:o,"%   ").concat(n.value)},data:a},color:["#36CBCB","#975FE4","#F04864","#FAD337","#4ECB73","#3BA0FF"],series:[{type:"pie",radius:["40%","60%"],center:["50%","35%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"30",fontWeight:"bold"}},labelLine:{show:!1},data:e}]}),window.onresize=function(){n.resize()}}},{key:"getTendencyData",value:function(){var e=this,t={projectId:this.projectId,startTime:1===this.tendencyRadio?this.weekAgo:this.monthAgo,endTime:this.nowTime};this.store.getTendencyData(t).then((function(t){if(0===t.code){var a=t.data.map((function(e){return{name:e.createOn,ordinary:e.riskTotal-e.significanTiskTotal,great:e.significanTiskTotal}}));e.getTendency(a)}}))}},{key:"getTendency",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=e&&e.length?e:[{name:"无数据",ordinary:0,great:0},{name:"无数据",ordinary:0,great:0},{name:"无数据",ordinary:0,great:0}];var t=e.map((function(e){return e.name})),a=e.map((function(e){return e.ordinary})),n=e.map((function(e){return e.great})),o=f.a.init(this.$refs.tendency);o.setOption({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},grid:{containLabel:!0,top:20,bottom:10,left:20,right:10},color:["#61D182","#2999EB"],xAxis:{type:"category",axisTick:{show:!1},data:t},yAxis:{type:"value",axisTick:{show:!1},axisLine:{show:!1},splitLine:{show:!0,lineStyle:{type:"dotted"}}},series:[{name:"一般隐患",data:a,type:"line",smooth:!0},{name:"重大隐患",data:n,type:"line",smooth:!0}]}),window.onresize=function(){o.resize()}}}]),a}(d["b"]);w=Object(l["a"])([Object(d["a"])({})],w);var j=w,C=j,D=(a("ee08"),a("2877")),T=Object(D["a"])(C,n,o,!1,null,null,null);t["default"]=T.exports},ee08:function(e,t,a){"use strict";var n=a("9194"),o=a.n(n);o.a}}]);
//# sourceMappingURL=chunk-05b34292.b1a6f54b.js.map