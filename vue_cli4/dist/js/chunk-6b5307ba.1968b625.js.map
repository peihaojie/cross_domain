{"version":3,"sources":["webpack:///./node_modules/core-js/modules/web.dom-collections.for-each.js","webpack:///./node_modules/core-js/internals/array-for-each.js","webpack:///./node_modules/core-js/modules/es.array.for-each.js","webpack:///./src/views/homePage.pug","webpack:///./src/store/modules/homePage/HomePageStore.ts","webpack:///./src/pages/home/homePage/Index.vue","webpack:///./src/pages/home/homePage/Index.vue?21e2","webpack:///./src/pages/home/homePage/Index.vue?6214","webpack:///./node_modules/core-js/internals/create-html.js","webpack:///./node_modules/core-js/modules/es.string.link.js","webpack:///./src/styles/homePage.stylus?d960","webpack:///./node_modules/core-js/internals/string-html-forced.js"],"names":["global","DOMIterables","forEach","createNonEnumerableProperty","COLLECTION_NAME","Collection","CollectionPrototype","prototype","error","$forEach","arrayMethodIsStrict","arrayMethodUsesToLength","STRICT_METHOD","USES_TO_LENGTH","module","exports","callbackfn","this","arguments","length","undefined","$","target","proto","forced","render","_vm","_h","$createElement","_c","_self","attrs","staticClass","_v","on","getUsageRateData","model","value","callback","$$v","usageRateRadio","expression","ref","_s","usageOn","usageOff","company","examine","danger","great","reform","parseFloat","week","month","project","getRiskData","riskRadio","getTrendData","trendRadio","_l","item","name","num","getCategoryData","categoryRadio","staticRenderFns","args","url","requestConfig","homePage","params","post","categoryData","riskData","trendData","usageRateData","troubleshoot","map","warning","namespaced","stateFactory","dynamic","store","center","warningList","link","now","Date","nowTime","get","weekAgo","getTime","getDay","monthAgo","getDate","projectId","sessionStorage","getItem","AMap","Map","zoom","viewMode","mapStyle","getMap","getTroubleshoot","getWarning","then","res","code","markerList","data","a","i","longitude","latitude","setCenter","marker","Marker","position","infoWindow","InfoWindow","anchor","content","offset","Pixel","open","close","push","add","startTime","endTime","use","unUse","getUsageRate","total","reduce","echart","init","$refs","usageRate","setOption","series","type","radius","avoidLabelOverlap","color","label","show","formatter","val","toFixed","emphasis","fontSize","labelLine","itemStyle","normal","borderColor","borderWidth","window","onresize","resize","risk","significanTiskTotal","getRisk","X","list","title","text","textStyle","fontWeight","left","top","tooltip","trigger","grid","containLabel","bottom","right","xAxis","axisTick","axisLabel","newParamsName","paramsNameNumber","provideNumber","rowNumber","Math","ceil","p","tempStr","start","end","substring","yAxis","axisLine","splitLine","lineStyle","barMaxWidth","barBorderRadius","createOn","ordinary","riskTotal","getTrend","trend","axisPointer","backgroundColor","smooth","inspectTask","count","getCategory","category","legend","orient","x","filter","showName","padStart","height","scroll","clientHeight","scrollWrap","scrollTop","requestAnimationFrame","getScroll","companyExamineTotal","companyRiskTotaL","companySignificantRiskTotal","companyWeekRatio","companyDayliyRatio","companyRiskRate","projectExamineTotal","projectRiskTotal","projectSignificantRiskTotal","projectWeekRatio","projectDayliyRatio","projectRiskRate","component","requireObjectCoercible","quot","string","tag","attribute","S","String","p1","replace","createHTML","forcedStringHTMLMethod","fails","METHOD_NAME","test","toLowerCase","split"],"mappings":"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","file":"js/chunk-6b5307ba.1968b625.js","sourcesContent":["var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar forEach = require('../internals/array-for-each');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n}\n","'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\nmodule.exports = (!STRICT_METHOD || !USES_TO_LENGTH) ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n} : [].forEach;\n","'use strict';\nvar $ = require('../internals/export');\nvar forEach = require('../internals/array-for-each');\n\n// `Array.prototype.forEach` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\n$({ target: 'Array', proto: true, forced: [].forEach != forEach }, {\n  forEach: forEach\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"homePage\"}},[_c('div',{staticClass:\"left\"},[_c('div',{staticClass:\"usage-rate shadow\"},[_c('p',{staticClass:\"title\"},[_vm._v(\"项目使用率\")]),_c('div',{staticClass:\"radio\"},[_c('el-radio-group',{on:{\"change\":_vm.getUsageRateData},model:{value:(_vm.usageRateRadio),callback:function ($$v) {_vm.usageRateRadio=$$v},expression:\"usageRateRadio\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"本周\")]),_c('el-radio',{attrs:{\"label\":2}},[_vm._v(\"本月\")])],1)],1),_c('div',{ref:\"usageRate\",staticClass:\"usage-rate-chart\"}),_c('div',{staticClass:\"project\"},[_c('p',{staticClass:\"on\"},[_vm._v(\"使用项目：\"+_vm._s(_vm.usageOn))]),_c('p',{staticClass:\"off\"},[_vm._v(\"未使用项目：\"+_vm._s(_vm.usageOff))])])]),_c('div',{staticClass:\"troubleshoot shadow\"},[_c('p',{staticClass:\"title\"},[_vm._v(\"排查情况\")]),_c('div',{staticClass:\"troubleshoot-item\"},[_c('div',{staticClass:\"top\"},[_c('div',{staticClass:\"total\"},[_c('p',[_vm._v(\"检查总数 \"+_vm._s(_vm.company.examine))]),_c('p',[_vm._v(\"隐患总数 \"+_vm._s(_vm.company.danger))]),_c('p',[_vm._v(\"重大隐患 \"+_vm._s(_vm.company.great))])]),_c('div',{staticClass:\"percent\"},[_c('p',{staticClass:\"name\"},[_vm._v(\"企业\")]),_c('p',{staticClass:\"percent-num\"},[_vm._v(_vm._s(_vm.company.reform)+\" %\")]),_c('p',{staticClass:\"reform\"},[_vm._v(\"整改率\")])])]),_c('el-progress',{attrs:{\"text-inside\":true,\"stroke-width\":20,\"percentage\":parseFloat(_vm.company.reform)}}),_c('div',{staticClass:\"compare\"},[_c('span',[_vm._v(\"周同比\"),_c('i',{staticClass:\"el-icon-caret-top\"}),_c('span',[_vm._v(_vm._s(_vm.company.week)+\"%\")])]),_c('span',[_vm._v(\"日环比\"),_c('i',{staticClass:\"el-icon-caret-bottom\"}),_c('span',[_vm._v(_vm._s(_vm.company.month)+\"%\")])])])],1),_c('div',{staticClass:\"troubleshoot-item\"},[_c('div',{staticClass:\"top\"},[_c('div',{staticClass:\"total\"},[_c('p',[_vm._v(\"检查总数 \"+_vm._s(_vm.project.examine))]),_c('p',[_vm._v(\"隐患总数 \"+_vm._s(_vm.project.danger))]),_c('p',[_vm._v(\"重大隐患 \"+_vm._s(_vm.project.great))])]),_c('div',{staticClass:\"percent\"},[_c('p',{staticClass:\"name\"},[_vm._v(\"项目\")]),_c('p',{staticClass:\"percent-num\"},[_vm._v(_vm._s(_vm.project.reform)+\" %\")]),_c('p',{staticClass:\"reform\"},[_vm._v(\"整改率\")])])]),_c('el-progress',{attrs:{\"text-inside\":true,\"stroke-width\":20,\"percentage\":parseFloat(_vm.project.reform)}}),_c('div',{staticClass:\"compare\"},[_c('span',[_vm._v(\"周同比\"),_c('i',{staticClass:\"el-icon-caret-top\"}),_c('span',[_vm._v(_vm._s(_vm.project.week)+\"%\")])]),_c('span',[_vm._v(\"日环比\"),_c('i',{staticClass:\"el-icon-caret-bottom\"}),_c('span',[_vm._v(_vm._s(_vm.project.month)+\"%\")])])])],1)]),_c('div',{staticClass:\"ranking shadow\"},[_c('p',{staticClass:\"title\"},[_vm._v(\"在施重大风险项目排行\")]),_c('div',{staticClass:\"radio\"},[_c('el-radio-group',{on:{\"change\":_vm.getRiskData},model:{value:(_vm.riskRadio),callback:function ($$v) {_vm.riskRadio=$$v},expression:\"riskRadio\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"本周\")]),_c('el-radio',{attrs:{\"label\":2}},[_vm._v(\"本月\")])],1)],1),_c('div',{ref:\"risk\",staticClass:\"risk-chart\"})])]),_c('div',{staticClass:\"center\"},[_c('div',{staticClass:\"shadow\",attrs:{\"id\":\"map\"}}),_c('div',{staticClass:\"trend shadow\"},[_c('p',{staticClass:\"title\"},[_vm._v(\"风险走势图\")]),_c('div',{staticClass:\"radio\"},[_c('el-radio-group',{on:{\"change\":_vm.getTrendData},model:{value:(_vm.trendRadio),callback:function ($$v) {_vm.trendRadio=$$v},expression:\"trendRadio\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"本周\")]),_c('el-radio',{attrs:{\"label\":2}},[_vm._v(\"本月\")])],1)],1),_c('div',{ref:\"trend\",staticClass:\"trend-chart\"})])]),_c('div',{staticClass:\"right\"},[_c('div',{staticClass:\"safety shadow\"},[_c('p',{staticClass:\"title\"},[_vm._v(\"安全管理预警\")]),_c('div',{ref:\"scrollWrap\",staticClass:\"warning\"},[_c('div',{ref:\"scroll\",staticClass:\"scroll\"},_vm._l((_vm.warningList),function(item){return _c('p',[_vm._v(_vm._s(item.name)),_c('span',[_vm._v(_vm._s(item.num))])])}),0)])]),_c('div',{staticClass:\"category shadow\"},[_c('p',{staticClass:\"title\"},[_vm._v(\"隐患类别统计\")]),_c('div',{staticClass:\"radio\"},[_c('el-radio-group',{on:{\"change\":_vm.getCategoryData},model:{value:(_vm.categoryRadio),callback:function ($$v) {_vm.categoryRadio=$$v},expression:\"categoryRadio\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"本周\")]),_c('el-radio',{attrs:{\"label\":2}},[_vm._v(\"本月\")])],1)],1),_c('div',{ref:\"category\",staticClass:\"category-chart\"})])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\r\n * @Date         : 2020-03-09 18:23:35\r\n * @LastEditors  : HaoJie\r\n * @LastEditTime : 2020-06-12 13:51:26\r\n * @FilePath     : \\src\\store\\modules\\homePage\\HomePageStore.ts\r\n */\r\nimport { Module, VuexModule, Action } from \"vuex-module-decorators\";\r\nimport store from \"../..\";\r\nimport { server as axios } from \"common/HttpClient\";\r\nimport { requestConfig } from \"request/requestConfig\";\r\n\r\n@Module({\r\n  namespaced: true,\r\n  stateFactory: true,\r\n  dynamic: true,\r\n  name: \"HomePageStore\",\r\n  store,\r\n})\r\nexport default class HomePageStore extends VuexModule {\r\n  private url: any;\r\n  constructor(args: any) {\r\n    super(args);\r\n    this.url = requestConfig.homePage;\r\n  }\r\n\r\n  // 获取隐患类别统计\r\n  @Action\r\n  getCategoryData(params: any): Promise<any> {\r\n    return axios.post(this.url.categoryData, params);\r\n  }\r\n\r\n  // 获取在施重大风险项目排行\r\n  @Action\r\n  getRiskData(params: any): Promise<any> {\r\n    return axios.post(this.url.riskData, params);\r\n  }\r\n\r\n  // 风险走势图\r\n  @Action\r\n  getTrendData(params: any): Promise<any> {\r\n    return axios.post(this.url.trendData, params);\r\n  }\r\n\r\n  // 风险走势图\r\n  @Action\r\n  getUsageRateData(params: any): Promise<any> {\r\n    return axios.post(this.url.usageRateData, params);\r\n  }\r\n\r\n  // 排查情况\r\n  @Action\r\n  getTroubleshoot(params: any): Promise<any> {\r\n    return axios.post(this.url.troubleshoot, params);\r\n  }\r\n\r\n  // 获取地图数据\r\n  @Action\r\n  getMap(params: any): Promise<any> {\r\n    return axios.post(this.url.map, params);\r\n  }\r\n\r\n  // 获取报警数据\r\n  @Action\r\n  getWarning(params: any): Promise<any> {\r\n    return axios.post(this.url.warning, params);\r\n  }\r\n}\r\n","\n\n\n\n\n\n\r\nimport { Component, Vue } from \"vue-property-decorator\";\r\nimport { getModule } from \"vuex-module-decorators\";\r\nimport HomePageStore from \"store/modules/homePage/HomePageStore\";\r\nimport echarts from \"echarts\";\r\nimport msg from \"common/MessageUtils\";\r\nimport Time from \"common/mixin\";\r\n\r\n@Component({})\r\nexport default class HomePage extends Vue {\r\n  private store: any;\r\n  private map: any;\r\n  private center: [number, number] = [114.057939, 22.543527];\r\n  private usageRateRadio = 1; // 项目使用率查看周期\r\n  private categoryRadio = 1; // 隐患类别统计查看周期\r\n  private riskRadio = 1; // 在施重大风险项目排行查看周期\r\n  private trendRadio = 1; // 风险走势查看周期\r\n  private usageOn = 0; // 使用项目数\r\n  private usageOff = 0; // 未使用项目数\r\n  private company: any = {\r\n    examine: 0, // 企业检查总数\r\n    danger: 0, // 企业隐患总数\r\n    great: 0, // 企业重大总数\r\n    week: 0, // 企业周同比\r\n    month: 0, // 企业重大总数\r\n    reform: 0 // 企业整改率\r\n  };\r\n\r\n  private project: any = {\r\n    examine: 0, // 项目检查总数\r\n    danger: 0, // 项目隐患总数\r\n    great: 0, // 项目重大总数\r\n    week: 0, // 项目周同比\r\n    month: 0, // 项目重大总数\r\n    reform: 0 // 项目整改率\r\n  };\r\n\r\n  private warningList: Array<any> = [\r\n    {\r\n      name: \"最近七天未进行隐患排查的项目数\",\r\n      num: 0,\r\n      link: \"weekUnCheckCount\"\r\n    },\r\n    { name: \"隐患整改率低于50%项目数\", num: 0, link: \"rectificationTotal\" },\r\n    { name: \"最近一个月未履行检查的公司数\", num: 0, link: \"monthUnCheckCount\" },\r\n    { name: \"未整改重大隐患数\", num: 0, link: \"unReformDangerTotal\" },\r\n    { name: \"超期未复查重大隐患数\", num: 0, link: \"unReviewHiddenDangerCount\" }\r\n  ];\r\n\r\n  private now: Date = new Date();\r\n  private nowTime: string = new Time(this.now).get(); // 当前的日期\r\n  private weekAgo: string = new Time(\r\n    new Date(\r\n      this.now.getTime() -\r\n        1000 * 60 * 60 * 24 * (this.now.getDay() ? this.now.getDay() - 1 : 6)\r\n    )\r\n  ).get(); // 周一的日期\r\n\r\n  private monthAgo: string = new Time(\r\n    new Date(\r\n      this.now.getTime() - 1000 * 60 * 60 * 24 * (this.now.getDate() - 1)\r\n    )\r\n  ).get(); // 一月前的日期\r\n\r\n  private projectId: string | null = sessionStorage.getItem(\"seeProjectId\"); // 登录的项目id\r\n  constructor() {\r\n    super();\r\n    this.store = getModule(HomePageStore);\r\n  }\r\n\r\n  mounted() {\r\n    this.map = new AMap.Map(\"map\", {\r\n      zoom: 11, // 级别\r\n      center: this.center, // 中心点坐标\r\n      viewMode: \"3D\", // 使用3D视图\r\n      mapStyle: \"amap://styles/fresh\" // 设置地图的显示样式\r\n    });\r\n    this.getMap();\r\n    this.getUsageRateData();\r\n    this.getRiskData();\r\n    this.getTrendData();\r\n    this.getCategoryData();\r\n    this.getTroubleshoot();\r\n    // this.getScroll();\r\n    this.getWarning();\r\n  }\r\n\r\n  // 挂载地图\r\n  getMap() {\r\n    this.store.getMap({ projectId: this.projectId }).then((res: any) => {\r\n      if (res.code === 0) {\r\n        const markerList: any[] = [];\r\n        res.data.forEach((a: any, i: any) => {\r\n          if (a.longitude && a.latitude) {\r\n            const center = [a.longitude, a.latitude];\r\n            if (i === 0) this.map.setCenter(center);\r\n            const marker = new AMap.Marker({\r\n              position: center\r\n            });\r\n            const infoWindow = new AMap.InfoWindow({\r\n              anchor: \"bottom-center\",\r\n              content: a.name,\r\n              offset: new AMap.Pixel(0, -30)\r\n            });\r\n            marker.on(\"mouseover\", () => {\r\n              infoWindow.open(this.map, center);\r\n            });\r\n            marker.on(\"mouseout\", () => {\r\n              infoWindow.close();\r\n            });\r\n            markerList.push(marker);\r\n          }\r\n        });\r\n        this.map.add(markerList);\r\n      }\r\n    });\r\n  }\r\n\r\n  // 获取项目使用率数据\r\n  getUsageRateData() {\r\n    const params: any = {\r\n      projectId: this.projectId,\r\n      startTime: this.usageRateRadio === 1 ? this.weekAgo : this.monthAgo,\r\n      endTime: this.nowTime\r\n    };\r\n    this.store.getUsageRateData(params).then((res: any) => {\r\n      if (res.code === 0) {\r\n        this.usageOn = res.data.use;\r\n        this.usageOff = res.data.unUse;\r\n        const data = [\r\n          {\r\n            name: \"使用项目\",\r\n            value: res.data.use\r\n          },\r\n          {\r\n            name: \"未使用项目\",\r\n            value: res.data.unUse\r\n          }\r\n        ];\r\n        this.getUsageRate(data);\r\n      }\r\n    });\r\n  }\r\n\r\n  // 加载项目使用率图表\r\n  getUsageRate(data: Array<UsageRate> | null = null) {\r\n    data = data && data.length ? data : [{ name: \"无数据\", value: 0 }];\r\n    const total = data.reduce((num, item) => num + item.value, 0);\r\n    const echart = echarts.init(this.$refs.usageRate);\r\n    echart.setOption({\r\n      series: [\r\n        {\r\n          type: \"pie\",\r\n          radius: [\"50%\", \"70%\"],\r\n          avoidLabelOverlap: false,\r\n          color: [\"#00b577\", \"#c0e8e7\"],\r\n          label: {\r\n            show: false,\r\n            position: \"center\",\r\n            formatter: (val: any) => {\r\n              return `${val.name}:\\n${\r\n                total ? ((val.value / total) * 100).toFixed(2) : 0\r\n              }%`;\r\n            }\r\n          },\r\n          emphasis: {\r\n            label: {\r\n              show: true,\r\n              fontSize: \"15\"\r\n            }\r\n          },\r\n          labelLine: {\r\n            show: false\r\n          },\r\n          itemStyle: {\r\n            normal: {\r\n              borderColor: \"#fff\",\r\n              borderWidth: data.length > 1 ? 2 : 0\r\n            }\r\n          },\r\n          data: data\r\n        }\r\n      ]\r\n    });\r\n    window.onresize = () => {\r\n      echart.resize();\r\n    };\r\n  }\r\n\r\n  // 获取风险数据\r\n  getRiskData() {\r\n    const params: any = {\r\n      projectId: this.projectId,\r\n      startTime: this.riskRadio === 1 ? this.weekAgo : this.monthAgo,\r\n      endTime: this.nowTime\r\n    };\r\n    this.store.getRiskData(params).then((res: any) => {\r\n      if (res.code === 0) {\r\n        const risk = res.data.map((a: any) => {\r\n          return {\r\n            name: a.name,\r\n            value: a.significanTiskTotal\r\n          };\r\n        });\r\n        this.getRisk(risk);\r\n      }\r\n    });\r\n  }\r\n\r\n  // 风险数量柱形图\r\n  getRisk(data: Array<Risk> | null = null) {\r\n    data = data && data.length\r\n      ? data\r\n      : [\r\n        { name: \"无数据\", value: 0 },\r\n        { name: \"无数据\", value: 0 },\r\n        { name: \"无数据\", value: 0 }\r\n      ];\r\n    const X = data.map(a => a.name);\r\n    const list = data.map(a => a.value);\r\n    const echart = echarts.init(this.$refs.risk);\r\n    echart.setOption({\r\n      title: {\r\n        text: \"风险数量\",\r\n        textStyle: {\r\n          fontWeight: 500,\r\n          fontSize: 14\r\n        },\r\n        left: 10,\r\n        top: 10\r\n      },\r\n      tooltip: {\r\n        trigger: \"item\"\r\n      },\r\n      grid: {\r\n        containLabel: true,\r\n        bottom: 10,\r\n        left: 20,\r\n        right: 10\r\n      },\r\n      color: \"#3BA1FF\",\r\n      xAxis: {\r\n        type: \"category\",\r\n        axisTick: { show: false },\r\n        data: X,\r\n        axisLabel: {\r\n          formatter: function(params: any) {\r\n            let newParamsName = \"\";\r\n            const paramsNameNumber = 6;\r\n            const provideNumber = 3;\r\n            const rowNumber = Math.ceil(paramsNameNumber / provideNumber);\r\n            if (paramsNameNumber > provideNumber) {\r\n              for (let p = 0; p < rowNumber; p++) {\r\n                let tempStr = \"\";\r\n                const start = p * provideNumber;\r\n                const end = start + provideNumber;\r\n                if (p === rowNumber - 1) {\r\n                  tempStr = params.substring(start, paramsNameNumber);\r\n                } else {\r\n                  tempStr = params.substring(start, end) + \"\\n\";\r\n                }\r\n                newParamsName += tempStr;\r\n              }\r\n            } else {\r\n              newParamsName = params;\r\n            }\r\n            return newParamsName;\r\n          }\r\n        }\r\n      },\r\n      yAxis: {\r\n        type: \"value\",\r\n        axisTick: { show: false },\r\n        axisLine: { show: false },\r\n        splitLine: {\r\n          show: true,\r\n          lineStyle: {\r\n            type: \"dotted\"\r\n          }\r\n        }\r\n      },\r\n      series: {\r\n        data: list,\r\n        type: \"bar\",\r\n        barMaxWidth: 20,\r\n        itemStyle: {\r\n          normal: {\r\n            // 柱形图圆角，初始化效果\r\n            barBorderRadius: [10, 10, 0, 0]\r\n          }\r\n        }\r\n      }\r\n    });\r\n    window.onresize = () => {\r\n      echart.resize();\r\n    };\r\n  }\r\n\r\n  // 获取风险走势数据\r\n  getTrendData() {\r\n    const params: any = {\r\n      projectId: this.projectId,\r\n      startTime: this.trendRadio === 1 ? this.weekAgo : this.monthAgo,\r\n      endTime: this.nowTime\r\n    };\r\n    this.store.getTrendData(params).then((res: any) => {\r\n      if (res.code === 0) {\r\n        const trendData = res.data.map((a: any) => {\r\n          return {\r\n            name: a.createOn,\r\n            ordinary: a.riskTotal - a.significanTiskTotal,\r\n            great: a.significanTiskTotal\r\n          };\r\n        });\r\n        this.getTrend(trendData);\r\n      }\r\n    });\r\n  }\r\n\r\n  // 风险走势图\r\n  getTrend(data: Array<Trend> | null = null) {\r\n    data = data && data.length\r\n      ? data\r\n      : [\r\n        { name: \"无数据\", ordinary: 0, great: 0 },\r\n        { name: \"无数据\", ordinary: 0, great: 0 },\r\n        { name: \"无数据\", ordinary: 0, great: 0 }\r\n      ];\r\n    const X = data.map(a => a.name);\r\n    const ordinary = data.map(a => a.ordinary);\r\n    const great = data.map(a => a.great);\r\n    const echart = echarts.init(this.$refs.trend);\r\n    echart.setOption({\r\n      tooltip: {\r\n        trigger: \"axis\",\r\n        axisPointer: {\r\n          type: \"cross\",\r\n          label: {\r\n            backgroundColor: \"#6a7985\"\r\n          }\r\n        }\r\n      },\r\n      grid: {\r\n        containLabel: true,\r\n        top: 20,\r\n        bottom: 10,\r\n        left: 20,\r\n        right: 10\r\n      },\r\n      color: [\"#61D182\", \"#2999EB\"],\r\n      xAxis: {\r\n        type: \"category\",\r\n        axisTick: { show: false },\r\n        data: X\r\n      },\r\n      yAxis: {\r\n        type: \"value\",\r\n        axisTick: { show: false },\r\n        axisLine: { show: false },\r\n        splitLine: {\r\n          show: true,\r\n          lineStyle: {\r\n            type: \"dotted\"\r\n          }\r\n        }\r\n      },\r\n      series: [\r\n        {\r\n          name: \"一般隐患\",\r\n          data: ordinary,\r\n          type: \"line\",\r\n          smooth: true\r\n        },\r\n        {\r\n          name: \"重大隐患\",\r\n          data: great,\r\n          type: \"line\",\r\n          smooth: true\r\n        }\r\n      ]\r\n    });\r\n    window.onresize = () => {\r\n      echart.resize();\r\n    };\r\n  }\r\n\r\n  // 获取隐患类型数据\r\n  getCategoryData() {\r\n    const params: any = {\r\n      projectId: this.projectId,\r\n      startTime: this.categoryRadio === 1 ? this.weekAgo : this.monthAgo,\r\n      endTime: this.nowTime\r\n    };\r\n    this.store.getCategoryData(params).then((res: any) => {\r\n      if (res.code === 0) {\r\n        const categoryData = res.data.map((a: any) => {\r\n          return {\r\n            name: a.inspectTask,\r\n            value: a.count\r\n          };\r\n        });\r\n        this.getCategory(categoryData);\r\n      }\r\n    });\r\n  }\r\n\r\n  // 隐患类别统计\r\n  getCategory(data: Array<Category> | null = null) {\r\n    data = data && data.length ? data : [{ name: \"无数据\", value: 0 }];\r\n    const total: number = data.reduce((num, item) => num + item.value, 0);\r\n    const X = data.map(a => a.name);\r\n    const echart = echarts.init(this.$refs.category);\r\n    echart.setOption({\r\n      tooltip: {\r\n        trigger: \"item\",\r\n        formatter: \"{b}: {c} ({d}%)\"\r\n      },\r\n      legend: {\r\n        orient: \"vertical\",\r\n        x: \"center\",\r\n        bottom: 20,\r\n        formatter: (name: string) => {\r\n          const label: Category = (data as any).filter((a: any) => a.name === name)[0];\r\n          const value: number | string = total\r\n            ? ((label.value / total) * 100).toFixed(2)\r\n            : 0;\r\n          const showName: string =\r\n            name.length < 6 ? name.padStart(5, \"一\") : name.substring(0, 5);\r\n          return ` ${showName} | ${\r\n            value < 10 && total ? \"0\" + value : value\r\n          }%   ${label.value}`;\r\n        },\r\n        data: X\r\n      },\r\n      color: [\"#36CBCB\", \"#975FE4\", \"#F04864\", \"#FAD337\", \"#4ECB73\", \"#3BA0FF\"],\r\n      series: [\r\n        {\r\n          type: \"pie\",\r\n          radius: [\"50%\", \"70%\"],\r\n          center: [\"50%\", \"35%\"],\r\n          avoidLabelOverlap: false,\r\n          label: {\r\n            show: false,\r\n            position: \"center\"\r\n          },\r\n          emphasis: {\r\n            label: {\r\n              show: true,\r\n              fontSize: \"30\",\r\n              fontWeight: \"bold\"\r\n            }\r\n          },\r\n          labelLine: {\r\n            show: false\r\n          },\r\n          itemStyle: {\r\n            normal: {\r\n              borderColor: \"#fff\",\r\n              borderWidth: data.length > 1 ? 2 : 0\r\n            }\r\n          },\r\n          data: data\r\n        }\r\n      ]\r\n    });\r\n    window.onresize = () => {\r\n      echart.resize();\r\n    };\r\n  }\r\n\r\n  // 向下滚动\r\n  getScroll() {\r\n    const height = (this.$refs.scroll as HTMLElement).clientHeight;\r\n    const top = (this.$refs.scrollWrap as HTMLElement).scrollTop;\r\n    if (top < height) {\r\n      (this.$refs.scrollWrap as HTMLElement).scrollTop = top + 1;\r\n      requestAnimationFrame(this.getScroll);\r\n      return;\r\n    }\r\n    (this.$refs.scrollWrap as HTMLElement).scrollTop = 0;\r\n    this.getScroll();\r\n  }\r\n\r\n  // 获取排查情况数据\r\n  getTroubleshoot() {\r\n    const params: any = { projectId: this.projectId };\r\n    this.store.getTroubleshoot(params).then((res: any) => {\r\n      if (res.code === 0) {\r\n        const data = res.data;\r\n        this.company = {\r\n          examine: data.companyExamineTotal, // 企业检查总数\r\n          danger: data.companyRiskTotaL, // 企业隐患总数\r\n          great: data.companySignificantRiskTotal, // 企业重大总数\r\n          week: data.companyWeekRatio, // 企业周同比\r\n          month: data.companyDayliyRatio, // 企业重大总数\r\n          reform: data.companyRiskRate.toFixed(2) // 企业整改率\r\n        };\r\n        this.project = {\r\n          examine: data.projectExamineTotal, // 项目检查总数\r\n          danger: data.projectRiskTotal, // 项目隐患总数\r\n          great: data.projectSignificantRiskTotal, // 项目重大总数\r\n          week: data.projectWeekRatio, // 项目周同比\r\n          month: data.projectDayliyRatio, // 项目重大总数\r\n          reform: data.projectRiskRate.toFixed(2) // 项目整改率\r\n        };\r\n      }\r\n    });\r\n  }\r\n\r\n  // 获取报警数据\r\n  getWarning() {\r\n    this.store.getWarning({ projectId: this.projectId }).then((res: any) => {\r\n      if (res.code === 0) {\r\n        const data = res.data;\r\n        this.warningList.forEach(a => {\r\n          a.num = data[a.link];\r\n        });\r\n      }\r\n    });\r\n  }\r\n}\r\ninterface UsageRate {\r\n  name: string;\r\n  value: number;\r\n}\r\ninterface Risk {\r\n  name: string;\r\n  value: number;\r\n}\r\ninterface Trend {\r\n  name: string;\r\n  ordinary: number;\r\n  great: number;\r\n}\r\ninterface Category {\r\n  name: string;\r\n  value: number;\r\n}\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"views/homePage.pug?vue&type=template&id=4c2ef036&lang=pug&\"\nimport script from \"./Index.vue?vue&type=script&lang=ts&\"\nexport * from \"./Index.vue?vue&type=script&lang=ts&\"\nimport style0 from \"styles/homePage.stylus?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar quot = /\"/g;\n\n// B.2.3.2.1 CreateHTML(string, tag, attribute, value)\n// https://tc39.github.io/ecma262/#sec-createhtml\nmodule.exports = function (string, tag, attribute, value) {\n  var S = String(requireObjectCoercible(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.link` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.link\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('link') }, {\n  link: function link(url) {\n    return createHTML(this, 'a', 'href', url);\n  }\n});\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!./homePage.stylus?vue&type=style&index=0&lang=stylus&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!./homePage.stylus?vue&type=style&index=0&lang=stylus&\"","var fails = require('../internals/fails');\n\n// check the existence of a method, lowercase\n// of a tag and escaping quotes in arguments\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    var test = ''[METHOD_NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  });\n};\n"],"sourceRoot":""}